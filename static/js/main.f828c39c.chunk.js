(this["webpackJsonppractice-project"]=this["webpackJsonppractice-project"]||[]).push([[0],{13:function(e,t,n){e.exports={trackerDesc:"trackerDescription_trackerDesc__36-y1",input:"trackerDescription_input__7mK-9",inputBtn:"trackerDescription_inputBtn__26eem",descList:"trackerDescription_descList__3OTgx",date:"trackerDescription_date__2Ce-q",deleteBtn:"trackerDescription_deleteBtn__1fZch",blind:"trackerDescription_blind__3osT2"}},14:function(e,t,n){e.exports={login:"login_login__19aQM",box:"login_box__2ruKU",otherTxt:"login_otherTxt__eU5TY",otherLogin:"login_otherLogin__3MztJ",googleBtn:"login_googleBtn__33d9h",githubBtn:"login_githubBtn__2tb12",loginbtn:"login_loginbtn__8--2g",regbtn:"login_regbtn__2hs0V"}},15:function(e,t,n){e.exports={trackerList:"trackerList_trackerList__1YRCd",trackerName:"trackerList_trackerName__3bQFv",trackerSection:"trackerList_trackerSection__18CUL",count:"trackerList_count__WZCGD",btn:"trackerList_btn__oQVcp",plus:"trackerList_plus__34mgX",minus:"trackerList_minus__1Ufmf",delete:"trackerList_delete__3vEZ1"}},22:function(e,t,n){e.exports={title:"emotion_title__1qM1t",emotionList:"emotion_emotionList__3O6Yy",emotionButton:"emotion_emotionButton__1XAze"}},24:function(e,t,n){e.exports={loginInput:"registerInput_loginInput__3Z4my",input:"registerInput_input__2ZNCG",newInput:"registerInput_newInput__1ssMA"}},25:function(e,t,n){e.exports={newReg:"newRegister_newReg__1nLpw",sysTitle:"newRegister_sysTitle__34MS3",tit:"newRegister_tit__1tEaM",regBtn:"newRegister_regBtn__2wERi"}},29:function(e,t,n){e.exports={header:"header_header__v9FKw",counter:"header_counter__1BAsj",logout:"header_logout__1MXam"}},33:function(e,t,n){e.exports={add:"add_add__2GMyP",btn:"add_btn__Neqr_"}},45:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(38),i=n.n(r),o=(n(45),n(32)),s=n(5),u=n(23),l=n(11),j=n(29),b=n.n(j),d=n(1),f=function(e){var t=e.trackerTotalCount,n=e.onLogout,c=e.userName;return Object(d.jsxs)("header",{className:b.a.header,children:[Object(d.jsxs)("h2",{children:[c,",",Object(d.jsx)("br",{})," How Was Your Today? \ud83d\ude42"]}),Object(d.jsx)("div",{className:b.a.counter,children:t}),Object(d.jsx)("button",{className:b.a.logout,onClick:n,children:"LOGOUT"})]})},m=n(10),p=n(33),h=n.n(p),O=function(e){var t=e.onAddEmotion,n=Object(c.useRef)(),a=Object(c.useRef)();return Object(d.jsx)("section",{className:h.a.add,children:Object(d.jsxs)("form",{ref:n,children:[Object(d.jsx)("input",{type:"text",placeholder:"Add Your Emotion",ref:a}),Object(d.jsx)("button",{onClick:function(e){e.preventDefault();var c={id:Object(m.a)(),emotion:a.current.value,description:[]};a.current.value&&t(c),n.current.reset()},className:h.a.btn,children:"Add"})]})})},_=n(40),g=n(13),x=n.n(g),v=function(e){var t=e.tracker,n=e.onUpdate,a=Object(c.useRef)(),r=Object(c.useRef)();return Object(d.jsx)("form",{onSubmit:function(e){e.preventDefault();var c=[],i=new Date,o={id:Object(m.a)(),text:r.current.value,date:"".concat(i.getFullYear(),".").concat(i.getMonth()+1,".").concat(i.getDate(),".").concat(new Intl.DateTimeFormat("ko-KR",{weekday:"short"}).format(i))};c=t.description?[].concat(Object(_.a)(t.description),[o]):[o];var s=Object(u.a)(Object(u.a)({},t),{},{description:c});o&&n(s),a.current.reset()},ref:a,children:Object(d.jsxs)("div",{className:x.a.trackerDesc,children:[Object(d.jsx)("input",{type:"text",className:x.a.input,placeholder:"Write your feelings in a row simply.",ref:r}),Object(d.jsx)("button",{type:"submit",className:x.a.inputBtn,children:Object(d.jsx)("i",{className:"fas fa-plus"})})]})})},k=Object(c.memo)((function(e){var t=e.tracker,n=e.onUpdate,a=Object(c.useRef)(),r=t.description,i=function(){var e=r.filter((function(e){return e.id!==a.current.value}));t.description=e,n(t)};return Object(d.jsx)("ul",{className:x.a.descList,children:r.map((function(e){return Object(d.jsxs)("li",{children:[e.text,Object(d.jsx)("span",{className:x.a.date,children:e.date}),Object(d.jsx)("input",{className:x.a.blind,ref:a,value:e.id,readOnly:!0}),Object(d.jsx)("button",{type:"button",className:x.a.deleteBtn,onClick:i,children:"X"})]},Object(m.a)())}))})})),N=function(e){var t=e.tracker,n=e.onUpdate;return Object(d.jsxs)(d.Fragment,{children:[t.description&&Object(d.jsx)(k,{tracker:t,onUpdate:n}),Object(d.jsx)(v,{tracker:t,onUpdate:n})]})},y=n(15),w=n.n(y),L=(n(47),Object(c.memo)((function(e){var t=e.onDelete,n=e.onUpdate,c=e.tracker;return Object(d.jsxs)("li",{children:[Object(d.jsxs)("div",{className:w.a.trackerSection,children:[Object(d.jsx)("div",{className:w.a.trackerName,children:c.emotion}),Object(d.jsx)("div",{className:w.a.count,children:c.description?c.description.length:0}),Object(d.jsx)("button",{type:"button",className:w.a.delete,onClick:function(){t(c)},children:Object(d.jsx)("i",{className:"fas fa-trash-alt"})})]}),Object(d.jsx)("div",{children:Object(d.jsx)(N,{tracker:c,onUpdate:n})})]})}))),C=Object(c.memo)((function(e){var t=e.tracker,n=e.onDelete,c=e.onUpdate;return Object(d.jsx)("ul",{className:w.a.trackerList,children:Object.keys(t).map((function(e){return Object(d.jsx)(L,{onDelete:n,onUpdate:c,tracker:t[e]},e)}))})})),S=n(22),R=n.n(S),I=function(e){var t=e.emotion,n=e.onUpdate,a=Object(c.useRef)();return Object(d.jsx)("button",{type:"button",className:R.a.emotionButton,onClick:function(e){var t={id:Object(m.a)(),emotion:e.target.innerText,count:0,description:[]};n(t)},ref:a,children:t.emotion})},U=function(e){var t=e.emotion,n=e.onUpdate;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h3",{className:R.a.title,children:"Emotion List"}),Object(d.jsx)("ul",{className:R.a.emotionList,children:Object.keys(t).map((function(e){return Object(d.jsx)("li",{children:Object(d.jsx)(I,{emotion:t[e],onUpdate:n})},t[e].id)}))})]})},B=function(e){var t=e.firebase,n=e.authService,a=Object(c.useState)(0),r=Object(l.a)(a,2),i=r[0],o=r[1],j=Object(c.useState)({}),b=Object(l.a)(j,2),p=b[0],h=b[1],_=Object(c.useState)({}),g=Object(l.a)(_,2),x=g[0],v=g[1],k=Object(c.useState)(),N=Object(l.a)(k,2),y=N[0],w=N[1],L=Object(c.useState)(),S=Object(l.a)(L,2),R=S[0],I=S[1],B=Object(s.f)();Object(c.useEffect)((function(){n.onAuthChange((function(e){e?(w(e.uid),I(e.displayName?e.displayName:e.email)):B.push("/")}))})),Object(c.useEffect)((function(){var e=t.load((function(e){h(e),o(Object.keys(e).length)}),"tracker",y);return function(){return e()}}),[t,y]),Object(c.useEffect)((function(){var e=t.load((function(e){v(e)}),"emotion",y);return function(){return e()}}),[t,y]);var D=function(e){h((function(t){var n=Object(u.a)({},t);return n[e.id]=e,n})),t.save(e,y)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(f,{trackerTotalCount:i,onLogout:function(){n.logout()},userName:R}),Object(d.jsx)(O,{onAddEmotion:function(e){D(e);var n={id:Object(m.a)(),emotion:e.emotion};t.saveEmotion(n,y)}}),Object(d.jsx)(U,{emotion:x,onUpdate:D}),p&&Object(d.jsx)(C,{tracker:p,onDelete:function(e){h((function(t){Object.keys(t).filter((function(t){return t!==e.id}))})),t.remove(e,y)},onUpdate:D})]})},D=n(14),E=n.n(D),A=n(24),T=n.n(A);function G(e){return"newInput"===e?T.a.newInput:"loginInput"===e?T.a.loginInput:void 0}var M=function(e){var t=e.onGetRef,n=e.styleName,a=Object(c.useRef)(),r=Object(c.useRef)(),i=function(){a.current.value&&r.current.value&&t(a.current.value,r.current.value)};return Object(d.jsxs)("div",{className:"".concat(G(n)),children:[Object(d.jsx)("input",{type:"email",ref:a,placeholder:"email",onChange:i,className:T.a.input}),Object(d.jsx)("input",{type:"password",ref:r,placeholder:"password",onChange:i,className:T.a.input})]})},F=function(e){var t=e.authService,n=Object(s.f)(),a=Object(c.useState)(),r=Object(l.a)(a,2),i=r[0],o=r[1],u=function(e){n.push({pathname:"/emotion",state:{id:e}})};Object(c.useEffect)((function(){t.onAuthChange((function(e){e&&u(e.uid)}))}));var j=function(e){t.login(e.target.outerText).then((function(e){u(e.user.uid)})).catch((function(e){var t=e.message;console.log(t)}))};return Object(d.jsx)("div",{className:E.a.login,children:Object(d.jsxs)("section",{className:E.a.box,children:[Object(d.jsx)("h2",{children:"Your Emotion \ud83d\ude09"}),Object(d.jsx)(M,{authService:t,onGetRef:function(e,t){o({email:e,password:t})},styleName:"loginInput"}),Object(d.jsx)("button",{type:"button",onClick:function(){n.push({pathname:"/register"})},className:E.a.regbtn,children:"Join"}),Object(d.jsx)("button",{type:"button",onClick:function(){i&&t.onAccountLogin(i.email,i.password).then((function(e){u(e.user.uid)})).catch((function(e){alert(e.message)}))},className:E.a.loginbtn,children:"Login"}),Object(d.jsx)("span",{className:E.a.otherTxt,children:"Or Sign Up Using"}),Object(d.jsxs)("div",{className:E.a.otherLogin,children:[Object(d.jsxs)("button",{type:"button",onClick:j,className:E.a.googleBtn,children:[Object(d.jsx)("i",{className:"fab fa-google"}),"Google"]}),Object(d.jsxs)("button",{type:"button",onClick:j,className:E.a.githubBtn,children:[Object(d.jsx)("i",{className:"fab fa-github"}),"Github"]})]})]})})},Y=n(25),P=n.n(Y),W=function(e){var t=e.authService,n=Object(c.useState)(),a=Object(l.a)(n,2),r=a[0],i=a[1],o=Object(s.f)();return Object(d.jsxs)("section",{className:P.a.newReg,children:[Object(d.jsxs)("div",{className:P.a.tit,children:[Object(d.jsx)("h1",{className:P.a.sysTitle,children:"Your Emotion"}),Object(d.jsx)("span",{children:"\ud83d\ude09"})]}),Object(d.jsx)(M,{authService:t,onGetRef:function(e,t){i({email:e,password:t})},styleName:"newInput"}),Object(d.jsx)("button",{type:"button",className:P.a.regBtn,onClick:function(){r&&t.onAccountRegist(r.email,r.password).then((function(e){var t;t=e.user.uid,o.push({pathname:"/emotion",state:{id:t}})})).catch((function(e){alert(e.message)}))},children:"Join"})]})};var Z=function(e){var t=e.firebase,n=e.authService;return Object(d.jsx)(o.a,{basename:"/emotionTracker",children:Object(d.jsxs)(s.c,{children:[Object(d.jsx)(s.a,{exact:!0,path:["/","/login"],children:Object(d.jsx)(F,{authService:n})}),Object(d.jsx)(s.a,{path:"/register",children:Object(d.jsx)(W,{authService:n})}),Object(d.jsx)(s.a,{path:"/emotion",children:Object(d.jsx)(B,{firebase:t,authService:n})})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},K=n(27),q=n(28),z=n(19),Q=(n(54),n(57),z.a.initializeApp({apiKey:"AIzaSyC64PNNqG6bE1g9n_9ZMetR0i8VanELn_I",authDomain:"emotion-tracker-46878.firebaseapp.com",projectId:"emotion-tracker-46878",storageBucket:"emotion-tracker-46878.appspot.com",appId:"1:1004907245469:web:764dab67c2c7af9e624974",measurementId:"G-VQ13W4YGME",databaseURL:"https://emotion-tracker-46878-default-rtdb.firebaseio.com/"})),V=Q.database(),X=Q.auth(),H=function(){function e(){Object(K.a)(this,e)}return Object(q.a)(e,[{key:"save",value:function(e,t){V.ref("users/".concat(t,"/tracker/").concat(e.id)).set(e)}},{key:"load",value:function(e,t,n){var c=V.ref("users/".concat(n,"/").concat(t));return c.on("value",(function(t){var n=t.val();n&&e(n)})),function(){return c.off()}}},{key:"remove",value:function(e,t){V.ref("users/".concat(t,"/tracker/").concat(e.id)).remove()}},{key:"saveEmotion",value:function(e,t){V.ref("users/".concat(t,"/emotion/").concat(e.id)).set(e)}}]),e}(),$=function(){function e(){Object(K.a)(this,e)}return Object(q.a)(e,[{key:"login",value:function(e){var t=new(z.a.auth["".concat(e,"AuthProvider")]);return X.signInWithPopup(t)}},{key:"onAccountRegist",value:function(e,t){return X.createUserWithEmailAndPassword(e,t)}},{key:"onAccountLogin",value:function(e,t){return X.signInWithEmailAndPassword(e,t)}},{key:"onAuthChange",value:function(e){z.a.auth().onAuthStateChanged((function(t){e(t)}))}},{key:"logout",value:function(){z.a.auth().signOut()}}]),e}(),ee=new H,te=new $;i.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(Z,{firebase:ee,authService:te})}),document.getElementById("root")),J()}},[[59,1,2]]]);
//# sourceMappingURL=main.f828c39c.chunk.js.map