(this["webpackJsonppractice-project"]=this["webpackJsonppractice-project"]||[]).push([[0],{12:function(e,t,n){e.exports={trackerDesc:"trackerDescription_trackerDesc__36-y1",input:"trackerDescription_input__7mK-9",inputBtn:"trackerDescription_inputBtn__26eem",descList:"trackerDescription_descList__3OTgx",date:"trackerDescription_date__2Ce-q",deleteBtn:"trackerDescription_deleteBtn__1fZch",blind:"trackerDescription_blind__3osT2"}},13:function(e,t,n){e.exports={trackerList:"trackerList_trackerList__1YRCd",trackerName:"trackerList_trackerName__3bQFv",trackerSection:"trackerList_trackerSection__18CUL",count:"trackerList_count__WZCGD",btn:"trackerList_btn__oQVcp",plus:"trackerList_plus__34mgX",minus:"trackerList_minus__1Ufmf",delete:"trackerList_delete__3vEZ1"}},21:function(e,t,n){e.exports={title:"emotion_title__1qM1t",emotionList:"emotion_emotionList__3O6Yy",emotionButton:"emotion_emotionButton__1XAze"}},26:function(e,t,n){e.exports={header:"header_header__v9FKw",counter:"header_counter__1BAsj",logout:"header_logout__1MXam"}},30:function(e,t,n){e.exports={add:"add_add__2GMyP",btn:"add_btn__Neqr_"}},33:function(e,t,n){e.exports={login:"login_login__19aQM",box:"login_box__2ruKU"}},43:function(e,t,n){},57:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(36),o=n.n(a),i=(n(43),n(29)),s=n(5),u=n(22),l=n(18),j=n(26),d=n.n(j),b=n(1),f=function(e){var t=e.trackerTotalCount,n=e.onLogout,c=e.userName;return Object(b.jsxs)("header",{className:d.a.header,children:[Object(b.jsxs)("h2",{children:[c,",",Object(b.jsx)("br",{})," How Was Your Today? \ud83d\ude42"]}),Object(b.jsx)("div",{className:d.a.counter,children:t}),Object(b.jsx)("button",{className:d.a.logout,onClick:n,children:"LOGOUT"})]})},m=n(10),p=n(30),O=n.n(p),h=function(e){var t=e.onAddEmotion,n=Object(c.useRef)(),r=Object(c.useRef)();return Object(b.jsx)("section",{className:O.a.add,children:Object(b.jsxs)("form",{ref:n,children:[Object(b.jsx)("input",{type:"text",placeholder:"Add Your Emotion",ref:r}),Object(b.jsx)("button",{onClick:function(e){e.preventDefault();var c={id:Object(m.a)(),emotion:r.current.value,description:[]};r.current.value&&t(c),n.current.reset()},className:O.a.btn,children:"Add"})]})})},v=n(38),x=n(12),_=n.n(x),k=function(e){var t=e.tracker,n=e.onUpdate,r=Object(c.useRef)(),a=Object(c.useRef)();return Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault();var c=[],o=new Date,i={id:Object(m.a)(),text:a.current.value,date:"".concat(o.getFullYear(),".").concat(o.getMonth()+1,".").concat(o.getDate(),".").concat(new Intl.DateTimeFormat("ko-KR",{weekday:"short"}).format(o))};c=t.description?[].concat(Object(v.a)(t.description),[i]):[i];var s=Object(u.a)(Object(u.a)({},t),{},{description:c});i&&n(s),r.current.reset()},ref:r,children:Object(b.jsxs)("div",{className:_.a.trackerDesc,children:[Object(b.jsx)("input",{type:"text",className:_.a.input,placeholder:"Write your feelings in a row simply.",ref:a}),Object(b.jsx)("button",{type:"submit",className:_.a.inputBtn,children:Object(b.jsx)("i",{className:"fas fa-plus"})})]})})},g=Object(c.memo)((function(e){var t=e.tracker,n=e.onUpdate,r=Object(c.useRef)(),a=t.description,o=function(){var e=a.filter((function(e){return e.id!==r.current.value}));t.description=e,n(t)};return Object(b.jsx)("ul",{className:_.a.descList,children:a.map((function(e){return Object(b.jsxs)("li",{children:[e.text,Object(b.jsx)("span",{className:_.a.date,children:e.date}),Object(b.jsx)("input",{className:_.a.blind,ref:r,value:e.id,readOnly:!0}),Object(b.jsx)("button",{type:"button",className:_.a.deleteBtn,onClick:o,children:"X"})]},Object(m.a)())}))})})),y=function(e){var t=e.tracker,n=e.onUpdate;return Object(b.jsxs)(b.Fragment,{children:[t.description&&Object(b.jsx)(g,{tracker:t,onUpdate:n}),Object(b.jsx)(k,{tracker:t,onUpdate:n})]})},N=n(13),L=n.n(N),C=(n(45),Object(c.memo)((function(e){var t=e.onDelete,n=e.onUpdate,c=e.tracker;return Object(b.jsxs)("li",{children:[Object(b.jsxs)("div",{className:L.a.trackerSection,children:[Object(b.jsx)("div",{className:L.a.trackerName,children:c.emotion}),Object(b.jsx)("div",{className:L.a.count,children:c.description?c.description.length:0}),Object(b.jsx)("button",{type:"button",className:L.a.delete,onClick:function(){t(c)},children:Object(b.jsx)("i",{className:"fas fa-trash-alt"})})]}),Object(b.jsx)("div",{children:Object(b.jsx)(y,{tracker:c,onUpdate:n})})]})}))),S=Object(c.memo)((function(e){var t=e.tracker,n=e.onDelete,c=e.onUpdate;return Object(b.jsx)("ul",{className:L.a.trackerList,children:Object.keys(t).map((function(e){return Object(b.jsx)(C,{onDelete:n,onUpdate:c,tracker:t[e]},e)}))})})),D=n(21),U=n.n(D),A=function(e){var t=e.emotion,n=e.onUpdate,r=Object(c.useRef)();return Object(b.jsx)("button",{type:"button",className:U.a.emotionButton,onClick:function(e){var t={id:Object(m.a)(),emotion:e.target.innerText,count:0,description:[]};n(t)},ref:r,children:t.emotion})},E=function(e){var t=e.emotion,n=e.onUpdate;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h3",{className:U.a.title,children:"Emotion List"}),Object(b.jsx)("ul",{className:U.a.emotionList,children:Object.keys(t).map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(A,{emotion:t[e],onUpdate:n})},t[e].id)}))})]})},w=function(e){var t=e.firebase,n=e.authService,r=Object(c.useState)(0),a=Object(l.a)(r,2),o=a[0],i=a[1],j=Object(c.useState)({}),d=Object(l.a)(j,2),p=d[0],O=d[1],v=Object(c.useState)({}),x=Object(l.a)(v,2),_=x[0],k=x[1],g=Object(c.useState)(),y=Object(l.a)(g,2),N=y[0],L=y[1],C=Object(c.useState)(),D=Object(l.a)(C,2),U=D[0],A=D[1],w=Object(s.f)();Object(c.useEffect)((function(){n.onAuthChange((function(e){e?(L(e.uid),A(e.displayName?e.displayName:e.email)):w.push("/")}))})),Object(c.useEffect)((function(){var e=t.load((function(e){O(e),i(Object.keys(e).length)}),"tracker",N);return function(){return e()}}),[t,N]),Object(c.useEffect)((function(){var e=t.load((function(e){k(e)}),"emotion",N);return function(){return e()}}),[t,N]);var T=function(e){O((function(t){var n=Object(u.a)({},t);return n[e.id]=e,n})),t.save(e,N)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(f,{trackerTotalCount:o,onLogout:function(){n.logout()},userName:U}),Object(b.jsx)(h,{onAddEmotion:function(e){T(e);var n={id:Object(m.a)(),emotion:e.emotion};t.saveEmotion(n,N)}}),Object(b.jsx)(E,{emotion:_,onUpdate:T}),p&&Object(b.jsx)(S,{tracker:p,onDelete:function(e){O((function(t){Object.keys(t).filter((function(t){return t!==e.id}))})),t.remove(e,N)},onUpdate:T})]})},T=n(33),R=n.n(T),B=function(e){var t=e.authService,n=e.btnType,r=Object(c.useRef)(),a=Object(c.useRef)(),o=Object(s.f)(),i=function(e){o.push({pathname:"/emotion",state:{id:e}})};return Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"email",ref:r,placeholder:"email"}),Object(b.jsx)("input",{type:"password",ref:a,placeholder:"password"}),"reg"===n?Object(b.jsx)("button",{type:"button",onClick:function(){t.onAccountRegist(r.current.value,a.current.value).then((function(e){i(e.user.uid)})).catch((function(e){alert(e.message),a.current.value=""}))},children:"\ud68c\uc6d0\uac00\uc785"}):Object(b.jsx)("button",{type:"button",onClick:function(){t.onAccountLogin(r.current.value,a.current.value).then((function(e){i(e.user.uid)})).catch((function(e){alert(e.message),r.current.value=""}))},children:"\ub85c\uadf8\uc778"})]})},F=function(e){var t=e.authService,n=Object(s.f)(),r=function(e){n.push({pathname:"/emotion",state:{id:e}})};Object(c.useEffect)((function(){t.onAuthChange((function(e){e&&r(e.uid)}))}));var a=function(e){t.login(e.target.outerText).then((function(e){r(e.user.uid)})).catch((function(e){var t=e.message;console.log(t)}))};return Object(b.jsx)("div",{className:R.a.login,children:Object(b.jsxs)("section",{className:R.a.box,children:[Object(b.jsx)(B,{authService:t,btnType:"login"}),Object(b.jsx)("button",{type:"button",onClick:function(){n.push({pathname:"/register"})},children:"\ud68c\uc6d0\uac00\uc785"}),Object(b.jsx)("button",{type:"button",onClick:a,children:"Google"}),Object(b.jsx)("button",{type:"button",onClick:a,children:"Github"})]})})},I=function(e){var t=e.authService;return Object(b.jsx)(B,{authService:t,btnType:"reg"})};var G=function(e){var t=e.firebase,n=e.authService;return Object(b.jsx)(i.a,{basename:"/emotionTracker",children:Object(b.jsxs)(s.c,{children:[Object(b.jsx)(s.a,{exact:!0,path:["/","/login"],children:Object(b.jsx)(F,{authService:n})}),Object(b.jsx)(s.a,{path:"/register",children:Object(b.jsx)(I,{authService:n})}),Object(b.jsx)(s.a,{path:"/emotion",children:Object(b.jsx)(w,{firebase:t,authService:n})})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),a(e),o(e)}))},P=n(24),W=n(25),Y=n(17),K=(n(52),n(55),Y.a.initializeApp({apiKey:"AIzaSyC64PNNqG6bE1g9n_9ZMetR0i8VanELn_I",authDomain:"emotion-tracker-46878.firebaseapp.com",projectId:"emotion-tracker-46878",storageBucket:"emotion-tracker-46878.appspot.com",appId:"1:1004907245469:web:764dab67c2c7af9e624974",measurementId:"G-VQ13W4YGME",databaseURL:"https://emotion-tracker-46878-default-rtdb.firebaseio.com/"})),q=K.database(),Q=K.auth(),X=function(){function e(){Object(P.a)(this,e)}return Object(W.a)(e,[{key:"save",value:function(e,t){q.ref("users/".concat(t,"/tracker/").concat(e.id)).set(e)}},{key:"load",value:function(e,t,n){var c=q.ref("users/".concat(n,"/").concat(t));return c.on("value",(function(t){var n=t.val();n&&e(n)})),function(){return c.off()}}},{key:"remove",value:function(e,t){q.ref("users/".concat(t,"/tracker/").concat(e.id)).remove()}},{key:"saveEmotion",value:function(e,t){q.ref("users/".concat(t,"/emotion/").concat(e.id)).set(e)}}]),e}(),Z=function(){function e(){Object(P.a)(this,e)}return Object(W.a)(e,[{key:"login",value:function(e){var t=new(Y.a.auth["".concat(e,"AuthProvider")]);return Q.signInWithPopup(t)}},{key:"onAccountRegist",value:function(e,t){return Q.createUserWithEmailAndPassword(e,t)}},{key:"onAccountLogin",value:function(e,t){return Q.signInWithEmailAndPassword(e,t)}},{key:"onAuthChange",value:function(e){Y.a.auth().onAuthStateChanged((function(t){e(t)}))}},{key:"logout",value:function(){Y.a.auth().signOut()}}]),e}(),z=new X,V=new Z;o.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(G,{firebase:z,authService:V})}),document.getElementById("root")),M()}},[[57,1,2]]]);
//# sourceMappingURL=main.1e5ff15f.chunk.js.map